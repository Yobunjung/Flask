import base64
from flask import Flask

app = Flask(__name__)

def save_base64_image(base64_image_data, output_path='paper_qr.png'):
    """
    Base64로 인코딩된 이미지를 디코딩하여 파일로 저장합니다.

    Parameters:
        base64_image_data (str): Base64로 인코딩된 이미지 데이터 (data:image/png;base64, 포함 가능)
        output_path (str): 저장할 파일 경로 (기본값: 'output_image.png')
    """
    # 이미지 데이터에서 Base64 부분 추출 (data:image/png;base64, 접두사가 포함된 경우)
    if base64_image_data.startswith("data:image/"):
        base64_image_data = base64_image_data.split(",")[1]

    # Base64 디코딩
    image_data = base64.b64decode(base64_image_data)

    # 파일로 저장
    with open(output_path, 'wb') as f:
        f.write(image_data)
    print(f"이미지가 {output_path}로 저장되었습니다.")

# 사용 예시
base64_image_data = "data:image/png;base64,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"
save_base64_image(base64_image_data, "paper_qr.png")

if __name__ == '__main__':
    app.run(debug=True)
